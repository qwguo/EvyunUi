!function(t,c){var h=function(p){var e=this;if(e.topWindow=t.top,e.topDocument=t.top.document,p){var o={addTarget:c("body"),type:1,subType:0,win:t,className:"",shade:{bgColor:"#000000",opacity:.5,close:!1},size:{full:0,width:"auto",height:"auto"},position:{fixed:1,pos:"m-c"},animate:["zoomIn","zoomOut"],autoClose:!1,move:0,head:"默认标题",opBtn:{close:1,min:1,max:1},con:{html:"提示信息",icon:1,src:null,btn:null},closeCallBack:null,styleCss:null};p.addTarget=p.addTarget||c("body"),e.j=c.extend(!0,{},o,p),e.createDom()}};h.prototype={constructor:h,popupId:0,allPopupList:null,alertType:[["alert","point"],"html","iframe","loading","taps","tab"],alertIcon:['<i class="evicon evicon-right-1 text-success"></i>','<i class="evicon evicon-close-2 text-warning"></i>','<i class="evicon evicon-point-2 text-info"></i>','<i class="evicon load-wait-1"></i>'],winAttr:function(){var p=c(t),e=c(document);return{winW:p.width(),winH:p.height(),docW:e.width(),docH:e.height(),docST:e.scrollTop(),docSL:e.scrollLeft(),popupW:this.popup.width(),popupH:this.popup.height()}},randomS:function(p){var e,o="12345qwertyuiopasdfgh67890jklmnbvcxzMNBVCZXASDQWERTYHGFUIOLKJP",t=o.length,i="";for(p=p||5,e=0;e<p;e++)i+=o.charAt(Math.floor(Math.random()*t));return i},maxZindex:function(){var t=[];return this.j.addTarget.children().each(function(p,e){var o=(e=c(e)).css("z-index");!isNaN(o)&&o<2e8&&t.push(1*o)}),Math.max(Math.max.apply(null,t),1e3)},createDom:function(){var e=this,o=e.j,p=[],t=[],i=[];e.originWindow=o.win,e.originDocument=o.win.document,e.popupId=e.randomS(5),e.maxZindex(),e.zIndex=e.maxZindex()+1;var a,n,s,u=e.topWindow.evPopup,l=!0;u&&u["popup_"+e.popupId]&&(e.popupId=e.randomS(5)),u&&c.each(u,function(p,e){if(e)return l=null,!1}),l&&(u=e.topWindow.evPopup={}),u["popup_"+e.popupId]=e,o.shade&&(a=["z-index:"+e.zIndex++],o.shade.bgColor&&a.push(" background-color:"+o.shade.bgColor),!isNaN(o.shade.opacity)&&("string"==typeof o.shade.opacity||"number"==typeof o.shade.opacity)&&a.push(" opacity:"+o.shade.opacity),e.popupShade=c("<div/>",{class:"popup-shade",id:"popupShade_"+e.popupId,style:a.join(";")}).appendTo(o.addTarget),o.shade.close&&e.popupShade.on("click",function(){e.popupClose()})),o.head&&p.push('<div class="popup-head"><span class="popup-title">'+(o.head||"")+"</span></div>"),o.opBtn&&(t.push('<div class="popup-option">'),o.opBtn.min&&t.push('<i class="evicon evicon-resize-xs-1" data-action="min" title="最小化"></i>'),o.opBtn.max&&t.push('<i class="evicon evicon-resize-lg-1" data-action="max" title="最大化"></i><i class="evicon evicon-resize-orig-1" data-action="orig" title="还原"></i>'),o.opBtn.close&&t.push('<i class="evicon evicon-close-1" data-action="close" title="关闭"></i>'),t.push("</div>")),function(){switch(i.push('<div class="popup-body"><div class="popup-body-inside">'),o.type){case 1:i.push('<div class="popup-content"><div class="popup-hint-info">'),o.con.icon&&i.push(e.alertIcon[o.con.icon-1]||e.alertIcon[0]),o.con.html&&i.push(o.con.html),i.push("</div></div>"),o.con.btn&&(i.push('<div class="popup-but-area"><span class="popup-but">'),c.each(o.con.btn,function(p,e){i.push('<a href="javascript:;" data-btn-index="'+p+'" data-action="btn" class="btn btn-sm '+(e.className||"")+'"><span>'+e.text+"</span></a>")}),i.push("</span></div>"));break;case 2:i.push('<div class="popup-content">'),i.push(o.con.html?o.con.html instanceof jQuery?o.con.html.html():o.con.html:"<p>html代码</p>"),i.push("</div>");break;case 3:i.push('<div class="popup-content"><div class="popup-loading-wait"></div>'),i.push('<iframe src="'+o.con.src+'" frameborder="0" allowTransparency="true" name="popup_'+e.popupId+'" id="popup_iframe_'+e.popupId+'"></iframe>'),i.push("</div>");break;case 4:i.push('<div class="popup-content"><div class="loading-type-'+o.con.icon+'"></div></div>')}i.push("</div></div>")}(),n=["z-index:"+e.zIndex++],s=function(){var p=[];switch(o.type){case 1:p.push("popup-"+e.alertType[0][o.subType]);break;default:p.push("popup-"+e.alertType[o.type-1])}return o.className&&p.push(o.className),o.animate&&o.animate.length&&p.push(o.animate[0]),p}(),!isNaN(o.size.width)&&n.push(" width:"+o.size.width+"px"),!isNaN(o.size.height)&&n.push(" height:"+o.size.height+"px"),o.styleCss&&n.push(o.styleCss),e.popup=c("<div/>",{class:"popup "+s.join(" "),style:n.join(";"),id:"popup_"+e.popupId,html:t.join("")+p.join("")+i.join("")}),o.animate&&o.animate.length&&e.popup.attr("data-animated",o.animate.join()),e.popup.appendTo(o.addTarget),e.popup.on({click:function(){var p=c(this);switch(p.data("action")){case"min":e.popupMin();break;case"max":e.popupMax();break;case"orig":e.popupOrig();break;case"close":e.popupClose();break;case"btn":o.con.btn&&o.con.btn[p.data("btnIndex")].callBack&&o.con.btn[p.data("btnIndex")].callBack(p,e.popup),o.con.btn[p.data("btnIndex")].noClose||e.popupClose()}}},".popup-option .evicon,.popup-but .btn"),setTimeout(function(){e.popupCountWH(),e.popupOffset(),o.size.full&&e.popupMax()}),isNaN(o.autoClose)||"string"!=typeof o.autoClose&&"number"!=typeof o.autoClose||setTimeout(function(){e.popupClose()},1e3*o.autoClose),(h.prototype.allPopupList=h.prototype.allPopupList||{})["popup_"+e.popupId]=e},popupOffset:function(){var p=this,e=p.j,o={"t-l":{left:0,top:0},"t-c":{left:"50%",top:0,"margin-left":-p.popup.width()/2+"px"},"t-r":{right:0,top:0},"m-l":{left:0,top:"50%","margin-top":-p.popup.height()/2+"px"},"m-c":{left:"50%",top:"50%","margin-top":-p.popup.height()/2+"px","margin-left":-p.popup.width()/2+"px"},"m-r":{right:0,top:"50%","margin-top":-p.popup.height()/2+"px"},"b-l":{left:0,bottom:0},"b-c":{left:"50%",bottom:0,"margin-left":-p.popup.width()/2+"px"},"b-r":{right:0,bottom:0}};!1===e.position.fixed&&p.popup.css({position:"absolute"}),p.popup.css(o[e.position.pos]||o["m-c"])},popupCountWH:function(){var p,e,o,t,i=this,a=i.j,n=i.winAttr();switch(a.type){case 3:o=i.popup.find("iframe"),t=null,o.on("load.resize",function(){i.selfWindow=o[0].contentWindow;try{i.selfDocument=o[0].contentWindow.document,o[0].contentWindow.iframeNumber=i.popupId,o[0].contentWindow.popup=i,t=o.contents().width(),o.contents().height()}catch(p){t=a.size.width,a.size.height}var p,e;a.size.full?o.css({width:"100%",height:i.popup.height()-(a.head?i.popup.find(".popup-head").outerHeight():0)+"px"}):o.css({width:("auto"===a.size.width?t:a.size.width)+"px",height:("auto"===a.size.height?t:a.size.height-(a.head?i.popup.find(".popup-head").outerHeight():0))+"px"}),p=a.size.width,e=a.size.height,p="auto"===p?i.popup.width():p,e="auto"===e?i.popup.height():e,p=p>n.winW?n.winW-10:p,e=e>n.winH?n.winH-10:e,i.popup.css({width:p+"px",height:e+"px"}),o.css({width:p+"px",height:e-(a.head?i.popup.find(".popup-head").outerHeight():0)+"px"}),o.siblings(".popup-loading-wait").remove(),i.popupOffset()});break;default:p=a.size.width,e=a.size.height,"auto"!==a.size.width&&(p=p>n.winW?n.winW-10:p,i.popup.css("width",p+"px")),"auto"!==e&&(e=e>n.winH?n.winH-10:e,i.popup.css("height",e+"px"))}},popupResetWH:function(){var p,e,a=this,n=a.j,s=a.winAttr();switch(n.type){case 3:!function(){var p,e,o=a.popup.find("iframe"),t=null,i=null;a.selfWindow=o[0].contentWindow;try{a.selfDocument=o[0].contentWindow.document,o[0].contentWindow.iframeNumber=a.popupId,o[0].contentWindow.popup=a,t=o.contents().find("body :first-child").width(),i=o.contents().find("body :first-child").height()}catch(p){t=n.size.width,i=n.size.height}n.size.full?o.css({width:"100%",height:a.popup.height()-(n.head?a.popup.find(".popup-head").outerHeight():0)+"px"}):o.css({width:("auto"===n.size.width?t:n.size.width)+"px",height:("auto"===n.size.height?t:n.size.height-(n.head?a.popup.find(".popup-head").outerHeight():0))+"px"}),p=t,e=i+(n.head?a.popup.find(".popup-head").outerHeight():0),p=p>s.winW?s.winW-10:p,e=e>s.winH?s.winH-10:e,a.popup.css({width:p+"px",height:e+"px"}),o.css({width:p+"px",height:e-(n.head?a.popup.find(".popup-head").outerHeight():0)+"px"}),a.popupOffset()}();break;default:p=n.size.width,e=n.size.height,"auto"!==n.size.width&&(p=p>s.winW?s.winW-10:p,a.popup.css("width",p+"px")),"auto"!==e&&(e=e>s.winH?s.winH-10:e,a.popup.css("height",e+"px"))}},popupMin:function(){var p=this,e=p.j;!p.originStyle&&(p.originStyle=p.popup.attr("style"));var o=p.popup.css("z-index"),t="bottom: 0; left:"+210*e.addTarget.find(".popup-size-min").length+"px; margin: 0; z-index:"+o+";";p.popup.addClass("popup-size-min").removeClass("popup-size-max").attr({style:t}),p.popupShade&&p.popupShade.hide()},popupMax:function(){var p=this;!p.originStyle&&(p.originStyle=p.popup.attr("style"));var e="z-index:"+p.popup.css("z-index")+";";p.popup.addClass("popup-size-max").removeClass("popup-size-min").attr({style:e}),p.popupShade&&p.popupShade.show()},popupOrig:function(){var p=this,e=p.j;p.popup.removeClass("popup-size-max popup-size-min").attr({style:p.originStyle}),p.popupShade&&p.popupShade.show(),e.size.full&&e.opBtn&&e.opBtn.max&&p.popupOffset()},popupHide:function(){var p=this,e=p.j;e.animate&&e.animate.length&&p.popup.removeClass(e.animate[0]||"").addClass(e.animate[1]||""),setTimeout(function(){p.popup.hide(),p.popupShade&&p.popupShade.hide()},e.animate[1]?210:0)},popupShow:function(){var p=this,e=p.j;p.popup.show(),p.popupShade&&p.popupShade.show(),e.animate&&e.animate.length&&p.popup.removeClass(e.animate[1]||"").addClass(e.animate[0]||"")},popupClose:function(){var p=this,e=p.j;e.animate&&e.animate.length&&p.popup.removeClass(e.animate[0]||"").addClass(e.animate[1]||""),setTimeout(function(){"function"==typeof e.closeCallBack&&e.closeCallBack(),p.popup.remove(),p.popupShade&&p.popupShade.remove(),p.allPopupList&&(p.allPopupList["popup_"+p.popupId]=null),p.topWindow.evPopup&&(p.topWindow.evPopup["popup_"+p.popupId]=null),p=null},e.animate[1]?210:0)},popupCloseAll:function(){this.allPopupList&&c.each(this.allPopupList,function(p,e){e&&e.popupClose()})},popupCloseWinAll:function(){this.topWindow.evPopup&&c.each(this.topWindow.evPopup,function(p,e){e&&e.popupClose()})},popupDrag:function(){this.j.head&&c.fn.drag&&this.popup.drag({randomPosition:!1,direction:"all",handler:".popup-head"})}},c.evPopup=function(p){return new h(p)},c.evPopupAlert=function(p){var o={type:1,subType:0,position:{pos:"m-c"},shade:{close:0},opBtn:{close:1,min:0,max:0},size:{width:300},con:{html:"提示信息",icon:3,btn:{btn0:{text:"确定",className:"btn-primary"}}}};return void 0!==p.subType&&(o.subType=p.subType),void 0!==p.className&&(o.className=p.className),void 0!==p.head&&(o.head=p.head),p.hint&&(o.con.html=-1!==p.hint.indexOf("<")?p.hint:'<span class="hint-text">'+p.hint+"</span>"),void 0!==p.icon&&(o.con.icon=p.icon),p.win&&(o.win=p.win),p.position&&(o.position.pos=p.position),null!=p.shade&&(o.shade=p.shade?c.extend(!0,{},o.shade,p.shade):p.shade),p.btn&&(c.isArray(p.btn)?c.each(p.btn,function(p,e){o.con.btn["btn"+p]=c.extend(!0,{},o.con.btn["btn"+p],e)}):o.con.btn.btn0=c.extend(!0,{},o.con.btn.btn0,p.btn)),p.animate&&(o.animate=p.animate),p.closeCallBack&&(o.closeCallBack=o.closeCallBack),p.styleCss&&(o.styleCss=p.styleCss),new h(o)},c.evPopupPoint=function(p){var e={type:1,subType:1,head:!1,className:"",shade:{close:0},position:{pos:"m-c"},opBtn:!1,con:{html:'<span class="hint-text">提示信息</span>',icon:1,btn:!1},autoClose:1};switch(p.hint&&(e.con.html=-1!==p.hint.indexOf("<")?p.hint:'<span class="hint-text">'+p.hint+"</span>"),void 0!==p.icon&&(e.con.icon=p.icon),void 0!==p.shade&&(e.shade=p.shade?c.extend(!0,{},e.shade,p.shade):p.shade),p.position&&(e.position.pos=p.position),p.style){case"block":p.className=p.className+" block",e.animate=["fadeInDown","fadeOutUp"],e.shade=!1,e.position.pos=p.position?p.position:"t-c"}return p.animate&&(e.animate=p.animate),p.className&&(e.className=p.className),void 0!==p.closeTime&&(e.autoClose=p.closeTime),p.styleCss&&(e.styleCss=p.styleCss),p.closeCallBack&&(e.closeCallBack=p.closeCallBack),new h(e)},c.evPopupConfirm=function(o){o.btn&&c.isArray(o.btn)&&c.each([{text:"确定",className:"btn-primary"},{text:"取消",className:"btn-outline-danger"}],function(p,e){o.btn[p]=c.extend({},e,o.btn[p])}),c.evPopupAlert(o)},c.evPopupPrompt=function(p){},c.evPopupHtml=function(p){var e,o={type:2,head:"HTML层",position:{pos:"m-c"},opBtn:{close:1,min:0,max:0},size:{width:"auto",height:"auto"},win:t,con:{html:"<p>这是html代码</p>"}};return void 0!==p.className&&(o.className=p.className),void 0!==p.head&&(o.head=p.head),p.html&&(o.con.html=((e=p.html)instanceof jQuery?e=e.html():"string"==typeof e&&-1!=c.inArray(e.substr(0,1),[".","#"])&&c(e).length&&(e=c(e).html()),e)),p.width&&(o.size.width=p.width),p.full&&(o.size.full=p.full),p.win&&(o.win=p.win),p.height&&(o.size.height=p.height),null!=p.shade&&(o.shade=p.shade?c.extend(!0,{},o.shade,p.shade):p.shade),p.styleCss&&(o.styleCss=p.styleCss),p.animate&&(o.animate=p.animate),p.closeCallBack&&(o.closeCallBack=p.closeCallBack),new h(o)},c.evPopupLoading=function(p){var e={type:4,head:!1,shade:{close:0},position:{pos:"m-c"},opBtn:!1,con:{icon:1}};return void 0!==p.className&&(e.className=p.className),p.icon&&(e.con.icon=p.icon),p.closeTime&&(e.autoClose=p.closeTime),null!=p.shade&&(e.shade=p.shade?c.extend(!0,{},e.shade,p.shade):p.shade),p.closeCallBack&&(e.closeCallBack=p.closeCallBack),new h(c.extend(!0,{},e,p))},c.evPopupIframe=function(p){var e={type:3,position:{pos:"m-c"},size:{},opBtn:{close:1,max:0,min:0},con:{src:"http://www.evyun.cn"}};return void 0!==p.className&&(e.className=p.className),void 0!==p.head&&(e.head=p.head),p.width&&(e.size.width=p.width),p.height&&(e.size.height=p.height),p.full&&(e.size.full=p.full),p.win&&(e.win=p.win),p.src&&(e.con.src=p.src),null!=p.shade&&(e.shade=p.shade?c.extend(!0,{},e.shade,p.shade):p.shade),p.styleCss&&(e.styleCss=p.styleCss),p.animate&&(e.animate=p.animate),p.closeCallBack&&(e.closeCallBack=p.closeCallBack),new h(e)},c.evPopupCloseAll=function(){var p=new h;p.popupCloseAll(),p=null},c.evPopupCloseWinAll=function(){var p=new h;p.popupCloseWinAll(),p=null}}(window,jQuery),$(document).on("click.evPopup",'[data-toggle="popup"]',function(p){var e=$(this).data();switch(e.popupType){case"alert":$.evPopupAlert({head:e.popupHead,hint:e.popupHint});break;case"point":$.evPopupPoint({icon:e.popupIcontype,hint:'<span class="hint-text">'+e.popupHint+"</span>",closeTime:e.popupClosetime});break;case"html":$.evPopupHtml({head:e.popupHead,html:e.popupTarget,width:e.popupWidth,height:e.popupHeight});break;case"loading":$.evPopupLoading({icon:e.popupIcontype,closeTime:e.popupClosetime});break;case"iframe":$.evPopupIframe({head:e.popupHead,src:e.popupSrc,width:e.popupWidth,height:e.popupHeight})}});